(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{211:function(e,t){},363:function(e,t,c){},364:function(e,t,c){},365:function(e,t,c){},366:function(e,t,c){},367:function(e,t,c){"use strict";c.r(t);var s,n,a=c(0),r=c.n(a),i=c(169),l=c.n(i),o=c(17),j=c.n(o),u=c(29),d=c(6),b=c(28),m=c(5),O=Object(a.createContext)(null),h=c(70),x=c(69),p=c.n(x),f=c(1),v=function(e){var t=e.message,c=t.name,s=t.user_id,n=t.text,a=!1;return s===e.current_uid&&(a=!0),a?Object(f.jsx)("div",{className:"row right-align someone",children:Object(f.jsx)("div",{className:"col s12 m8 16 right",children:Object(f.jsxs)("p",{className:"sentbyme",children:[c,": ",n]})})}):Object(f.jsx)("div",{className:"row left-align",children:Object(f.jsx)("div",{className:"col s12 m8 16 left",children:Object(f.jsxs)("p",{className:"opponent",children:[c,": ",n]})})})},g=c(183),N=function(e){var t=e.messages,c=e.user_id;return Object(f.jsx)(g.a,{className:"messages",children:t.map((function(e,t){return Object(f.jsx)(v,{message:e,current_uid:c},e._id)}))})},w=function(e){var t=e.message,c=e.setMessage,s=e.sendMessage;return Object(f.jsxs)("form",{onSubmit:s,className:"form",children:[Object(f.jsx)("input",{type:"text",className:"input",placeholder:"Message",value:t,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?s(e):null}}),Object(f.jsx)("button",{className:"sendButton",children:"Send Message"})]})},k=function(){var e=Object(a.useContext)(O),t=e.user,c=(e.setUser,Object(m.g)()),n=c.room_id,r=(c.room_name,Object(a.useState)("")),i=Object(d.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)([]),u=Object(d.a)(j,2),b=u[0],x=u[1];Object(a.useEffect)((function(){t&&(s=p()("https://back-socketio.herokuapp.com")).emit("join",{name:t.name,room_id:n,user_id:t._id})}),[]),Object(a.useEffect)((function(){s.on("message",(function(e){x([].concat(Object(h.a)(b),[e]))}))}),[b]),Object(a.useEffect)((function(){s.emit("get-messages-history",n),s.on("output-messages",(function(e){x(e)}))}),[]);return t?Object(f.jsx)("div",{className:"outerContainer",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(N,{messages:b,user_id:t._id}),Object(f.jsx)(w,{message:l,setMessage:o,sendMessage:function(e){e.preventDefault(),l&&(console.log(l),s.emit("sendMessage",l,n,(function(){return o("")})))}})]})}):Object(f.jsx)(m.a,{to:"/"})},S=function(e){var t=e.name;e.key;return Object(f.jsx)("div",{className:"card horizontal",children:Object(f.jsx)("div",{className:"card-stacked",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsx)("p",{children:t})})})})},y=function(e){var t=e.rooms;return Object(f.jsx)("div",{children:t&&t.map((function(e){return Object(f.jsx)(b.b,{to:"/chat/".concat(e._id,"/").concat(e.name),children:Object(f.jsx)(S,{name:e.name})},e._id)}))})},C=function(){var e="https://back-socketio.herokuapp.com",t=Object(a.useContext)(O),c=t.user,s=(t.setUser,Object(a.useState)("")),r=Object(d.a)(s,2),i=r[0],l=r[1],o=Object(a.useState)([]),j=Object(d.a)(o,2),u=j[0],b=j[1];Object(a.useEffect)((function(){return n=p()(e),function(){n.emit("disconnect"),n.off()}}),[e]),Object(a.useEffect)((function(){n.on("room-created",(function(e){b([].concat(Object(h.a)(u),[e]))}))}),[u]),Object(a.useEffect)((function(){n.on("output-rooms",(function(e){b(e)}))}),[]);return c?Object(f.jsx)("div",{style:{textAlign:"center"},children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col s12 m6",children:Object(f.jsx)("div",{className:"card blue-grey darken-1",children:Object(f.jsxs)("div",{className:"card-content white-text",children:[Object(f.jsxs)("span",{className:"card-title",children:["Welcome ",c&&c.name]}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.emit("create-room",i),console.log(i),l("")},children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"room",placeholder:"Enter a room name",type:"text",className:"validate",value:i,onChange:function(e){return l(e.target.value)}}),Object(f.jsx)("label",{htmlFor:"room",children:"ROOM"})]})}),Object(f.jsx)("button",{className:"btn",type:"submit",children:"Create room"})]})})]})})}),Object(f.jsx)("div",{className:"col s12 m6",children:Object(f.jsx)(y,{rooms:u})})]})}):Object(f.jsx)(m.a,{to:"/login"})},_=function(){var e=Object(a.useContext)(O),t=e.user,c=e.setUser,s=function(){var e=Object(u.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://back-socketio.herokuapp.com/logout",{credentials:"include"});case 3:t=e.sent,s=t.json(),console.log("LOGOUT",s),c(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("nav",{className:"green",children:Object(f.jsxs)("div",{className:"nav-wrapper",children:[Object(f.jsx)("a",{href:"/",className:"brand-logo",children:"CHAT"}),Object(f.jsx)("a",{href:"#","data-target":"mobile-demo",className:"sidenav-trigger",children:Object(f.jsx)("i",{className:"material-icons",children:"menu"})}),Object(f.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:t?Object(f.jsx)("li",{children:Object(f.jsx)("a",{onClick:s,children:"Logout"})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/login",children:"Login"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/signup",children:"Singup"})})]})})]})}),Object(f.jsx)("ul",{className:"sidenav",id:"mobile-demo",children:t?Object(f.jsx)("li",{children:Object(f.jsx)("a",{onClick:s,children:"Logout"})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/login",children:"Login"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/signup",children:"Singup"})})]})})]})},E=function(){var e=Object(a.useContext)(O),t=e.user,c=e.setUser,s=Object(a.useState)(null),n=Object(d.a)(s,2),r=n[0],i=n[1],l=Object(a.useState)(null),o=Object(d.a)(l,2),b=o[0],h=o[1],x=Object(a.useState)(null),p=Object(d.a)(x,2),v=p[0],g=p[1],N=Object(a.useState)(null),w=Object(d.a)(N,2),k=w[0],S=w[1],y=function(){var e=Object(u.a)(j.a.mark((function e(t){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(null),S(null),e.prev=3,e.next=6,fetch("https://back-socketio.herokuapp.com/login",{method:"POST",credentials:"include",body:JSON.stringify({email:r,password:b}),headers:{"Content-Type":"application/json"}});case 6:return s=e.sent,e.next=9,s.json();case 9:(n=e.sent).errors&&(g(n.errors.email),S(n.errors.password)),n.user&&c(n.user),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"LOGIN"}),Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("form",{className:"col s12",onSubmit:y,children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"input-field col s6",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:v}),Object(f.jsx)("label",{for:"email",children:"Email"})]}),Object(f.jsxs)("div",{className:"input-field col s6",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:b,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:k}),Object(f.jsx)("label",{for:"password",children:"Password"})]}),Object(f.jsx)("div",{className:"col s12",children:Object(f.jsx)("button",{className:"btn",children:"INICIAR SESI\xd3N"})})]})})})]})},T=function(){var e=Object(a.useContext)(O),t=e.user,c=e.setUser,s=Object(a.useState)(null),n=Object(d.a)(s,2),r=n[0],i=n[1],l=Object(a.useState)(null),o=Object(d.a)(l,2),b=o[0],h=o[1],x=Object(a.useState)(null),p=Object(d.a)(x,2),v=p[0],g=p[1],N=Object(a.useState)(null),w=Object(d.a)(N,2),k=w[0],S=w[1],y=Object(a.useState)(null),C=Object(d.a)(y,2),_=C[0],E=C[1],T=Object(a.useState)(null),M=Object(d.a)(T,2),P=M[0],F=M[1],I=function(){var e=Object(u.a)(j.a.mark((function e(t){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(null),F(null),S(null),e.prev=4,e.next=7,fetch("https://back-socketio.herokuapp.com/signup",{method:"POST",credentials:"include",body:JSON.stringify({name:r,email:b,password:v}),headers:{"Content-Type":"application/json"}});case 7:return s=e.sent,e.next=10,s.json();case 10:(n=e.sent).errors&&(E(n.errors.email),S(n.errors.name),F(n.errors.password)),n.user&&c(n.user),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Signup"}),Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("form",{className:"col s12",onSubmit:I,children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{placeholder:"Placeholder",id:"first_name",type:"text",value:r,onChange:function(e){return i(e.target.value)},className:"validate"}),Object(f.jsx)("div",{className:"name error red-text",children:k}),Object(f.jsx)("label",{for:"first_name",children:"Name"})]}),Object(f.jsxs)("div",{className:"input-field col s6",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:b,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:_}),Object(f.jsx)("label",{for:"email",children:"Email"})]}),Object(f.jsxs)("div",{className:"input-field col s6",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:v,onChange:function(e){return g(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:P}),Object(f.jsx)("label",{for:"password",children:"Password"})]}),Object(f.jsx)("div",{className:"col s12",children:Object(f.jsx)("button",{className:"btn",children:"REGISTRAR"})})]})})})]})};c(363),c(364),c(365),c(366);var M=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),c=t[0],s=t[1];Object(a.useEffect)((function(){n()}),[]);var n=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://back-socketio.herokuapp.com/verifyuser",{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,s(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(b.a,{children:Object(f.jsxs)(O.Provider,{value:{user:c,setUser:s},children:[Object(f.jsx)(_,{}),Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/",component:C}),Object(f.jsx)(m.b,{exact:!0,path:"/chat/:room_id/:room_name",component:k}),Object(f.jsx)(m.b,{exact:!0,path:"/signup",component:T}),Object(f.jsx)(m.b,{exact:!0,path:"/login",component:E}),Object(f.jsx)(m.b,{exact:!0,path:"/logout",component:E})]})]})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,368)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))};l.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(M,{})}),document.getElementById("root")),P()}},[[367,1,2]]]);
//# sourceMappingURL=main.05f6ccb0.chunk.js.map